<div class="col-lg-12 targets">
  <!-- top section -->

  <div class="ibox goalsScreenAllDep top-section" style="margin-top:8.073vw;margin-bottom: 1.563vw">
    <div class="goalsSumm ibox-title" style="height: 3.333vw;line-height: 2.083vw; padding-top: 0px;">
      <div class="departmentName">
        <span>{{factoryName | translate}}</span><span style="margin:0 20px">|</span>
        <span>{{"MACHINES" | translate}}: {{allDepartments[0].DepartmentsMachine.length}}</span>
        <span style="margin:0 20px">|</span>
        <span>{{"ALL_THE_KPIS_ARE_CALCULATED" | translate}}</span>
      </div>
      <div class="pull-right">
        <!-- Edit Pencil -->
        <div ng-hide="true" class="target-edit-button clickable" ng-click="showPencils.value = !showPencils.value" title="{{'EDIT' | translate}}"></div>
        <div class="pull-left">
          <!--
                                            <div class="btn new-dep-header-buttons" style="position:inherit;color:#101010;border:1px solid #d0cfd0" ng-click="updateData();"> <span title="{{'LAST_UPDATE' | translate}}" class="Rectangle-2 lastRefresh" style="color: grey;font-size: 13px;min-width: 140px">{{
                                                lastUpdate | date:"dd/MM/yyyy HH:mm:ss" }}</span
                                                ><i class="fa fa-refresh"></i></div> -->
        </div>
      </div>
    </div>
    <div class="ibox-content" id="collapsedfactory">
      <div class="goalBarsContainer row" style="display:block">
        <div
          class="bars-container"
          ng-class="{'odd' : $index % 2 == 1, 'even' : $index % 2 == 0}"
          ng-repeat="target in targets | hideTargets:showPencils"
        >
          <div
            class="goalBarsContainer-parent"
            current="target.ActualTargetValue"
            edges="10"
            id="target.Name"
            name="{{target.ui_name}}"
            show-pencils="showPencils"
            target="target.TargetValue"
            target-data="target"
            target-goals-directive
            box-mode="1"
          ></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="col-lg-12">
  <!-- bottom section -->
  <div class="col-lg-4 col-md-6 col-sm-12 pull-left" ng-repeat="machine in allDepartments[0].DepartmentsMachine">
    <div class="ibox goalsScreenAllDep" style="margin-bottom:30px">
      <div class="goalsSumm ibox-title" style="height: 3.333vw;line-height: 2.083vw;padding:0.781vw 1.563vw">
        <div style="display: inline-block">
          <span>
            <a target="MachineScreenEditor" ui-sref="appObjectMachineFullView({appObjectName: 'MachineScreenEditor',ID: machine.MachineID})">
              {{locallanguage ? machine.MachineLname : machine.MachineEName}}
            </a>
          </span>
        </div>
      </div>
      <div class="ibox-content">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12" ng-repeat="machineTarget in machines[machine.MachineID] | hideTargets:showPencils">
            <div
              class="goalBarsContainer-parent"
              current="machineTarget.ActualTargetValue"
              edges="10"
              id="machineTarget.Name"
              name="{{machineTarget.ui_name}}"
              style="padding:15px 30px"
              show-pencils="showPencils"
              target="machineTarget.TargetValue"
              target-data="machineTarget"
              target-goals-directive
              box-mode="0"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
